\documentclass[10pt,xcolor={dvipsnames}]{beamer}
\usepackage[T1]{fontenc}
\usepackage[bitstream-charter]{mathdesign}
\usepackage[utf8]{inputenc}
\usepackage{xcolor}
\usepackage{siunitx}
\usepackage{csquotes}
\usepackage[version=3]{mhchem}
\usepackage[
backend=biber,
style=numeric,
citestyle=numeric-comp,
sorting=none
]{biblatex}
\addbibresource{references.bib}

\definecolor{snublue}{HTML}{013378} 
\definecolor{snumidblue}{HTML}{BCD2FF}

\usepackage{tikz}

\newif\ifshowframelogo
\showframelogotrue

\newlength{\logoheight}
\setlength{\logoheight}{0.9cm}
\newlength{\logomargin}
\setlength{\logomargin}{0.01mm}
\newcommand{\logofileLight}{figures/snu_logo.jpg} 
\newcommand{\logofileDark}{figures/snu_logo_white.jpg}
\newcommand{\logofile}{\logofileLight}

\newenvironment{standout}[2][]{%
  \begingroup
  \renewcommand{\logofile}{\logofileDark}%
  \showframelogotrue
  \setbeamercolor{background canvas}{bg=snublue}%
  \setbeamercolor{normal text}{fg=white}%
  \setbeamercolor{structure}{fg=white}%
  \setbeamercolor{frametitle}{fg=white,bg=snublue}%
  \setbeamercolor{framesubtitle}{fg=white,bg=snublue}%
  \setbeamercolor{itemize item}{fg=white}
  \setbeamercolor{itemize subitem}{fg=white}
  \setbeamercolor{itemize subsubitem}{fg=white}
  \setbeamercolor{itemize/enumerate body}{fg=white}
  \setbeamercolor{itemize/enumerate subbody}{fg=white}
  \setbeamercolor{itemize/enumerate subsubbody}{fg=white}
  \setbeamercolor{block title}{fg=white,bg=snublue}
  \setbeamercolor{block body}{fg=white,bg=snublue}
  \setbeamercolor{block title alerted}{fg=white,bg=snublue}
  \setbeamercolor{block body alerted}{fg=white,bg=snublue}
  \setbeamercolor{block title example}{fg=white,bg=snublue}
  \setbeamercolor{block body example}{fg=white,bg=snublue}
  \begin{frame}[#1]{#2}%
  \color{white}
}{%
  \end{frame}%
  \endgroup
}

\usetikzlibrary{calc} 
\newcommand{\Closure}[2]{%
  \begin{tikzpicture}[remember picture,overlay]
    \pgfmathsetlengthmacro{\BoxW}{0.54\paperwidth}
    \pgfmathsetlengthmacro{\BoxH}{0.45\paperheight}
    \pgfmathsetlengthmacro{\BoxX}{0.40\paperwidth}
    \pgfmathsetlengthmacro{\BoxY}{0.86\paperheight}
    \coordinate (TitleNW) at ($(current page.south west)+(\BoxX,\BoxY)$);
    \coordinate (TitleSW) at ($(TitleNW)+(0,-\BoxH)$);
    \coordinate (TitleSE) at ($(TitleNW)+(\BoxW,-\BoxH)$);
    \fill[snublue] (TitleNW) rectangle (TitleSE);
    \draw (TitleNW) rectangle (TitleSE);
    \node[anchor=center,align=left,text=white,
          font=\usebeamerfont{title},
          text width=\BoxW-0.06\paperwidth]
      at ($(TitleNW)!0.5!(TitleSE)$) {#1};
    \node[anchor=west,align=left,text=snumidblue,
          font=\usebeamerfont{author},
          text width=\BoxW-0.06\paperwidth]
      at ($(TitleSW)+(0.035\paperwidth,0.09\paperheight)$) {#2};
  \end{tikzpicture}%
}


\renewcommand*{\bibfont}{\scriptsize}
\AtBeginBibliography{
  \hypersetup{linkcolor=snublue,citecolor=snublue,urlcolor=snublue}%
}
\DeclareFieldFormat
  [book,inbook,collection,manual,report,thesis]
  {title}{\textcolor{snublue}{#1}\isdot}
\DeclareFieldFormat{pages}{#1}
\DeclareFieldFormat{pagetotal}{#1}
\DeclareFieldFormat[article]{title}{#1\isdot}
\newbibmacro*{journalname}{%
	\iffieldundef{shortjournal}
	{\printfield{journaltitle}}
	{\printfield{shortjournal}}}
\DeclareBibliographyDriver{article}{%
	\usebibmacro{bibindex}%
	\usebibmacro{begentry}%
	\printnames{author}%
	\newunit\newblock
	\printfield[titlecase]{title}%
	\newunit\newblock
	\printtext{\mkbibemph{\usebibmacro{journalname}}}%
	\addspace
	\printtext{\mkbibbold{\printfield{year}}}%
	\iffieldundef{volume}{}{%
		\addcomma\space\printfield{volume}}%
	\iffieldundef{pages}{}{%
		\addcomma\space\printfield{pages}}%
	\usebibmacro{finentry}%
}
\ExecuteBibliographyOptions{giveninits=true}
\newcommand\mkstructnum[1]{%
	{\usebeamercolor[fg]{structure}\mkbibbrackets{#1}}}

\DeclareCiteCommand{\cite}
{\usebibmacro{prenote}}
{\printtext[bibhyperref]{\mkstructnum{\printfield{labelnumber}}}}
{\multicitedelim}
{\usebibmacro{postnote}}

\usetheme{default}
\useinnertheme{rectangles}

\setbeamertemplate{caption}[numbered]
\setbeamertemplate{caption label separator}{: }

%\setbeamerfont{caption}{size=\tiny}
\setbeamerfont{caption}{size=\scriptsize}
\setbeamerfont{caption name}{series=\bfseries}
\setbeamercolor{caption name}{fg=snublue}

\usefonttheme{serif} 
\setbeamerfont{title}{series=\bfseries,parent=structure}
\setbeamerfont{subtitle}{series=\mdseries}
\setbeamerfont{frametitle}{size=\large,series=\bfseries,parent=structure}
\setbeamerfont{alerted text}{series=\bfseries,parent=structure}
\setbeamercolor{alerted text}{fg=black}
\setbeamerfont{itemize/enumerate subbody}{size=\normalsize}
\setbeamerfont{itemize/enumerate subsubbody}{size=\normalsize}
\setbeamercolor{itemize item}{fg=snublue}
\setbeamertemplate{itemize item}{\scriptsize$\blacksquare$}
\setbeamertemplate{itemize subitem}{\scriptsize$-$}
\setbeamertemplate{itemize subsubitem}{}
\setbeamertemplate{enumerate item}{\footnotesize\insertenumlabel.}
\setbeamertemplate{headline}{}
\setbeamertemplate{navigation symbols}{}
\setbeamercolor*{framesubtitle}{fg=snumidblue,bg=white}
\setbeamerfont{frametitle}{
    series=\bfseries,
    size=\Large
}
\setbeamerfont{framesubtitle}{
    series=\bfseries,
    size=\large
}
\setbeamertemplate{frametitle}{%
    \vspace{1.2ex}%
    \begin{beamercolorbox}[leftskip=0pt]{frametitle}
        \usebeamerfont{frametitle}\hspace{-1.2em}
        \insertframetitle\strut
        \usebeamerfont{framesubtitle}%
        \usebeamercolor[fg]{framesubtitle}%
        \ \insertframesubtitle\par%
    \end{beamercolorbox}%
    \ifshowframelogo
      \begin{tikzpicture}[remember picture,overlay]
        \node[anchor=north east] at ([xshift=-\logomargin,yshift=-\logomargin]current page.north east)
          {\includegraphics[height=\logoheight]{\logofile}};
      \end{tikzpicture}%
    \fi
}

\setbeamertemplate{footnote}{%
  \tikz[remember picture,overlay]{
    \node[anchor=south west]
      at ([xshift=1em,yshift=0.50em]current page.south west){%
        \begin{minipage}[t]{\dimexpr\paperwidth-2em\relax}
          \tiny
          \setlength{\parindent}{0pt}%
          \parskip=0pt%
          \leavevmode\insertfootnotemark\nobreak\hspace{0.4em}\ignorespaces\insertfootnotetext\unskip
        \end{minipage}%
      };
  }%
}

\makeatletter
\setbeamertemplate{footnoterule}{}
\def\footnoterule{}
\makeatother

\newcommand{\cbox}[2][\linewidth]{%
  \setbeamercolor{coloredboxstuff}{bg=snublue!12, fg=black}%
  \begin{beamercolorbox}[center,sep=1em,wd=#1]{coloredboxstuff}%
    #2
  \end{beamercolorbox}%
}
\newcommand{\widesep}{\addtolength{\itemsep}{10pt}}

\title{SNU beamer template}
\date{\today}
\institute{Seoul National University}
\author{\textbf{Gildong Hong}*}

\begin{document}
%%\maketitle
\begin{standout}[plain,c]{}
	\setbeamercolor{title}{fg=white,bg=snublue}
	\setbeamercolor{subtitle}{fg=white,bg=snublue}
	\setbeamercolor{author}{fg=snumidblue,bg=snublue}
	\setbeamercolor{date}{fg=snumidblue,bg=snublue}
	\setbeamercolor{institute}{fg=snumidblue,bg=snublue}
	\titlepage
\end{standout}

\begin{frame}{This is a title}
	\cbox{%
	This is a colorbox.
}
\vspace{.8cm}
Using a Metropolis-Hastings scheme with uniform proposal over sites:

\begin{itemize}
	\vspace{.25cm}
	\widesep
	\item Insertion proposal: choose one empty site uniformly and attempt ($N \rightarrow N+1$)
	$$
	p_{\mathrm{ins}}=\min\!\left(1,\; e^{\beta \mu}\,\frac{V-N}{N+1}\right)
	$$
	\item Deletion proposal: choose one occupied site uniformly and attempt ($N \rightarrow N-1$)
	$$
	p_{\mathrm{del}}=\min\!\left(1,\; e^{-\beta \mu}\,\frac{N}{V-N+1}\right)
	$$
\end{itemize}
\end{frame}

\begin{frame}{This is a title}{And a Subtitle}
	\begin{columns}
	\begin{column}{.5\textwidth}
	\begin{table}
		\centering
		%\footnotesize
		\Large
		\sisetup{table-number-alignment = center, round-mode=places, round-precision=4}
		\begin{tabular}{l S}
			\hline
			\textbf{Ion} & {\textbf{Radius (\si{\angstrom})}} \\
			\hline
			$\mathrm{Na^{+}}$  & 1.472 \\
			$\mathrm{K^{+}}$   & 1.778 \\
			$\mathrm{Cl^{-}}$  & 1.808 \\
			$\mathrm{Br^{-}}$  & 1.973 \\
			\hline
		\end{tabular}
		\caption{This is a table.\footnote{This is a footnote.}}
	\end{table}
	\end{column}
	\begin{column}{.5\textwidth}
		\begin{figure}[t]
			\centering
			\includegraphics[width=1.0\linewidth]{figures/fig1.jpg}
			\caption{This is a figure.\cite{jeong2023predictive}}
		\end{figure}  	
	\end{column}
	\end{columns}
\end{frame}

\begin{standout}[c]{Takeaways}
	\begin{itemize}
		\item Item 1
		\item<2-> Item 2
		\item<3-> Item 3
	\end{itemize}
\end{standout}

\begingroup
\setbeamertemplate{frametitle continuation}{}
\begin{frame}[allowframebreaks]{References}
	\printbibliography
\end{frame}
\endgroup

{
\usebackgroundtemplate{%
  \includegraphics[width=\paperwidth,height=\paperheight]{figures/background.png}%
}

\begin{frame}
	\Closure
		{Thank you}{Questions?}
\end{frame}
\usebackgroundtemplate{}
}

\end{document}
